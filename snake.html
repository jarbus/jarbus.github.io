<canvas id="canvas" width="1000" height="1000" style="background-color: black">
<script>
	var canvas = document.getElementById("canvas");
	var context = canvas.getContext("2d");
	var keys = []; //W:87 S:83 A:65 D:68
	var tileSize = canvas.width / 25;
	var score = 0;
	var direction = {x: 1, y: 0}
	var snake = [{x: 2, y: 0}, {x: 1, y: 0}, {x: 0, y: 0}]
	var apple = {x: 5, y: 5}
	window.addEventListener("keydown", function(e)
	{
		keys[e.keyCode] = true;
	}, true);
	window.addEventListener("keyup", function(e)
	{
		delete keys[e.keyCode];
	}, true);
	setInterval(update, 1000/10);
	function update()
	{
		if (keys[87] && direction.y==0)
			direction = {x: 0, y:-1}
		else if (keys[83] && direction.y==0)
			direction = {x: 0, y:1}
		else if (keys[65] && direction.x==0)
			direction = {x: -1, y:0}
		else if (keys[68] && direction.x==0)
			direction = {x: 1, y:0}
		for(var i = snake.length-1; i>0; i--)
		{
			snake[i].x = snake[i-1].x;
			snake[i].y = snake[i-1].y;
		}
		snake[0].x += direction.x;
		snake[0].y += direction.y;
		if(snake[0].x == apple.x && snake[0].y == apple.y){
			score++;
			apple.x = parseInt(Math.random()*25);
			apple.y = parceInt(Math.random()*25);
			snake.push({x: snake[snake.length-1].x, y:snake[snake.length-1].y});
		}
		for(var i=1; i<snake.length; i++)
		{
			if(snake[0].x == snake[i].x && snake[0].y == snake[i].y)
				window.location.reload(false);
		}
		if(snake[0].x > 24 || snake[0].y > 24 || snake[0].x < 0 || snake[0].y < 0)
			window.location.reload(false);
		
		context.clearRect(0, 0, canvas.width, canvas.height);
		context.fillStyle = "gray";
		context.font = "50px Arial";
		context.fillText(score, 10, 68);
		context.fillStyle = "green";
		for(var i=0; i < snake.length; i++){
			context.fillRect((snake[i].x * tileSize), (snake[i].y*tileSize), tileSize, tileSize);
		}
		context.fillStyle = "red";
		context.fillRect((apple.x * tileSize), (apple.y*tileSize), tileSize, tileSize);	
	}
</script>
